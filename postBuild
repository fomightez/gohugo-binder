#!/bin/bash

# ----------Install GO language -------------
# based on https://github.com/go-hep/binder/blob/master/postBuild
# and https://golang.org/dl/
# Originally moved go installation to apt based on https://github.com/aborruso/bashnotebook/blob/master/binder/apt.txt 
# ; however, that resulted in old version 1.10 something and I know current version is 1.13.6. I think I had that working
# except wasn't in the path. Without it in the path I could not type `go` and instead had to give absolute path. That should
# be fixed now by adding a symolbic link to it in `~/.local/bin` like does at 
# https://github.com/aborruso/bashnotebook/blob/0de5d657de745fffe53ed1acc35d01c75d389b6e/binder/postBuild#L48
# Note that I had realized I didn't need go installed if not compiling Hugo, but would like to work out
# how to get recent versions working on Binder since close.

set -e

GOVERS=1.13.6

mkdir -p \
	$HOME/.local/go/$GOVERS \
	$HOME/.local/bin \
	$HOME/go

echo "::: install Go ${GOVERS}..."
curl -O -L https://golang.org/dl/go${GOVERS}.linux-amd64.tar.gz
tar -C $HOME/.local/go/$GOVERS -zxf go${GOVERS}.linux-amd64.tar.gz
/bin/rm go${GOVERS}.linux-amd64.tar.gz

export GOROOT=$HOME/.local/go/$GOVERS/go
export GOPATH=$HOME/go
export PATH=$GOPATH/bin:$GOROOT/bin:$ROOT


